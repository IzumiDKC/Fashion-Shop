@model FashionShopDemo.Models.Product
@using Microsoft.AspNetCore.Mvc.Rendering
@{
        ViewData["Title"] = "Thêm Sản Phẩm";
        Layout = "~/Views/Shared/_Layout.cshtml";   
}
    <link rel="stylesheet" href="~/css/ProductAdd.css">
    <div class="container">
        <div class="row justify-content-center mt-5">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0 text-center" id="changing-color">Thêm Sản Phẩm</h5>
                    </div>  
                    <div class="card-body">
                        <form asp-action="Add" method="post" enctype="multipart/form-data">
                            <div class="form-group">
                                <label asp-for="Name" class="font-weight-bold">Tên Sản Phẩm</label>
                                <input asp-for="Name" class="form-control" />
                                <span asp-validation-for="Name" class="text-danger"></span>
                            </div>
                            <div class="form-group">
                                <label asp-for="Price" class="font-weight-bold">Giá</label>
                                <input asp-for="Price" class="form-control" />
                                <span asp-validation-for="Price" class="text-danger"></span>
                            </div>
                            <div class="form-group">
                                <label asp-for="PromotionPrice" class="font-weight-bold">Giảm Giá (%)</label>
                                <input asp-for="PromotionPrice" class="form-control" />
                                <span asp-validation-for="PromotionPrice" class="text-danger"></span>
                            </div>
                            <div class="form-group">
                                <label asp-for="Description" class="font-weight-bold">Mô Tả</label>
                                <textarea asp-for="Description" class="form-control"></textarea>
                                <span asp-validation-for="Description" class="text-danger"></span>
                            </div>
                            <div class="form-group">
                                <label asp-for="CategoryId" class="font-weight-bold">Loại Thời Trang</label>
                                <select asp-for="CategoryId" asp-items="ViewBag.Categories" class="form-control">
                                    <option value="">-- Chọn Loại Đồ --</option>
                                </select>
                                <span asp-validation-for="CategoryId" class="text-danger"></span>
                            </div>
                            <div class="form-group">
                                <label asp-for="BrandId" class="font-weight-bold">Thương Hiệu</label>
                                <select asp-for="BrandId" asp-items="ViewBag.Brands" class="form-control">
                                    <option value="">-- Chọn Thương Hiệu --</option>
                                </select>
                                <span asp-validation-for="BrandId" class="text-danger"></span>
                            </div>
                            <div class="form-group">
                                <label asp-for="ImageUrl" class="font-weight-bold">Ảnh Sản Phẩm</label>
                                <input type="file" asp-for="ImageUrl" class="form-control" />
                                <span asp-validation-for="ImageUrl" class="text-danger"></span>
                            </div>
                            <div class="form-group">
                                <label asp-for="SeoTitle" class="font-weight-bold">Tiêu Đề SEO</label>
                                <input asp-for="SeoTitle" class="form-control" />
                                <span asp-validation-for="SeoTitle" class="text-danger"></span>
                            </div>
                            <div class="form-group">
                                <label asp-for="Quantity" class="font-weight-bold">Số Lượng</label>
                                <input asp-for="Quantity" class="form-control" />
                                <span asp-validation-for="Quantity" class="text-danger"></span>
                            </div>
                            <div class="form-group">
                                <label for="IsHot" class="font-weight-bold"> Hàng Hot
                                    <input type="checkbox" id="IsHot" asp-for="IsHot" class="form-control visually-hidden" />
                                    <span class="toggle-button">
                                        <span class="toggle-button-inner"></span>
                                    </span>
                                </label>
                            </div>
                            <div class="form-group">
                                <label for="HotStartDate" class="font-weight-bold">Thời Gian Bắt Đầu: </label>
                                <input asp-for="HotStartDate" type="datetime-local" class="form-control" id="HotStartDate"
                                       value="@DateTime.Now.ToString("yyyy-MM-ddTHH:mm:ss")" />
                                <span asp-validation-for="HotStartDate" class="text-danger"></span>
                            </div>
                            <div class="form-group">
                                <label for="HotEndDate" class="font-weight-bold">Thời Gian Kết Thúc: </label>
                                <input asp-for="HotEndDate" type="datetime-local" class="form-control" id="HotEndDate"
                                       value="@DateTime.Now.ToString("yyyy-MM-ddTHH:mm:ss")" />
                                <span asp-validation-for="HotEndDate" class="text-danger"></span>
                            </div>
                            <br />
                            <button type="submit" class="btn btn-primary btn-block">Thêm Sản Phẩm</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>


<style>
    .form-group label {
        display: flex; 
        align-items: center;
    }

    .toggle-button {
        width: 25px; 
        height: 25px;
        margin-left: 10px;
        margin-top: 5px;
        margin-right: 10px;
    }

    .form-group input[type="checkbox"].visually-hidden {
            position: absolute;
            opacity: 0;

    }

       .toggle-button {
            display: inline-block;
            width: 50px;
            height: 25px;
            background-color: #ccc;
            border-radius: 15px;
            cursor: pointer;
            position: relative;

    }

       .toggle-button-inner {
            display: block;
            width: 21px;
            height: 21px;
            background-color: white;
            border-radius: 50%;
            position: absolute;
            top: 2px; 
            left: 2px;
            transition: transform 0.3s;

    }

       .form-group input[type="checkbox"]:checked + .toggle-button {
            background-color: #007bff;

    }

         .form-group input[type="checkbox"]:checked + .toggle-button .toggle-button-inner {
              transform: translateX(24px);

    }

</style>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        let promotionPriceInput = document.getElementById("PromotionPrice");
        if (promotionPriceInput.value === "") {
            promotionPriceInput.value = "0";
        }
    });
    document.addEventListener("DOMContentLoaded", function () {
        let hotEndDateInput = document.getElementById("HotEndDate");
        let now = new Date();
        now.setDate(now.getDate() + 1); 

        let formattedDate = now.toISOString().slice(0, 19);

        hotEndDateInput.value = formattedDate;
    });
    document.addEventListener("DOMContentLoaded", function () {
        const isHotCheckbox = document.getElementById("IsHot");
        const hotStartDateInput = document.getElementById("HotStartDate");
        const hotEndDateInput = document.getElementById("HotEndDate");

        function toggleHotDates() {
            hotStartDateInput.closest(".form-group").style.display = isHotCheckbox.checked ? "block" : "none";
            hotEndDateInput.closest(".form-group").style.display = isHotCheckbox.checked ? "block" : "none";
        }

        isHotCheckbox.addEventListener("change", toggleHotDates);
        toggleHotDates(); 
    });
</script>